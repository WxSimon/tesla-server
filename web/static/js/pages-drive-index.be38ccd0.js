(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-drive-index"],{"0493":function(t,e,a){"use strict";a.r(e);var i=a("dad3"),n=a.n(i);for(var c in i)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(c);e["default"]=n.a},"3df2":function(t,e,a){"use strict";a.r(e);var i=a("98f6"),n=a("0493");for(var c in n)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(c);a("ca9f");var o,s=a("f0c5"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"0aceccf9",null,!1,i["a"],o);e["default"]=r.exports},5105:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".content-item-box-location[data-v-0aceccf9]{display:flex}.content-item-box-details[data-v-0aceccf9]{margin:5px 0}.el-col[data-v-0aceccf9]{display:flex}",""]),t.exports=e},"98f6":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"page-body"},[a("v-uni-view",{staticClass:"page-section page-section-gap"},[a("v-uni-map",{staticStyle:{width:"100%",height:"800px"},attrs:{"enable-zoom":t.mapCfg.enableZoom,subkey:"N3HBZ-XKK6F-GVEJP-JA3JP-HP7VQ-FCBFT",longitude:t.longitude,latitude:t.latitude,"min-scale":"3","layer-style":"1","max-scale":"30",scale:t.mapScale,polyline:t.polyline,markers:t.markers}})],1),a("v-uni-cover-view",{staticClass:"map-card"},[a("v-uni-cover-view",{staticClass:"content-item-box-location"},[a("v-uni-cover-view",{staticClass:"content-item-box-location-icon"},[t._v("起")]),a("v-uni-cover-view",{staticClass:"content-item-box-location-text"},[t._v(t._s(t.drive.d_from_addr))]),t.drive.d_from_tag?a("v-uni-cover-view",{staticClass:"content-item-box-location-tag"},[t._v(t._s(t.drive.d_from_tag))]):t._e()],1),a("v-uni-cover-view",{staticClass:"content-item-box-location",staticStyle:{"margin-top":"10px"}},[a("v-uni-cover-view",{staticClass:"content-item-box-location-icon"},[t._v("终")]),a("v-uni-cover-view",{staticClass:"content-item-box-location-text"},[t._v(t._s(t.drive.d_to_addr))]),t.drive.d_to_tag?a("v-uni-cover-view",{staticClass:"content-item-box-location-tag"},[t._v(t._s(t.drive.d_to_tag))]):t._e()],1),a("v-uni-cover-view",{staticClass:"content-item-box-details"},[a("v-uni-cover-view",{staticClass:"el-row"},[a("v-uni-cover-view",{staticClass:"el-col el-col-11"},[t._v("里程:"),a("v-uni-cover-view",{staticStyle:{color:"#000"}},[t._v(t._s(t.drive.d_distance)+"\n                            km")])],1),a("v-uni-cover-view",{staticClass:"el-col el-col-11"},[t._v("用时: "+t._s(t.drive.duration))])],1),a("v-uni-cover-view",{staticClass:"el-row"},[a("v-uni-cover-view",{staticClass:"el-col el-col-11"},[t._v("表显消耗:"),a("v-uni-cover-view",{staticStyle:{color:"#000"}},[t._v(t._s(t.drive.d_car_distance)+"\n                            km")])],1),a("v-uni-cover-view",{staticClass:"el-col el-col-11"},[t._v("消耗: "+t._s(t.drive.d_energy)+" wh")])],1)],1)],1)],1)],1)},c=[]},ca9f:function(t,e,a){"use strict";var i=a("d767"),n=a.n(i);n.a},d767:function(t,e,a){var i=a("5105");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("71713903",i,!0,{sourceMap:!1,shadowMode:!1})},dad3:function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d"),a("14d9");var n=i(a("c7eb")),c=i(a("1da1")),o={data:function(){return{driveId:0,longitude:0,latitude:0,mapScale:12,mapCfg:{enableZoom:!0,enableSatellite:!0},polyline:[],markers:[],drive:{}}},onLoad:function(t){this.driveId=t.driveId},mounted:function(){var t=this;return(0,c.default)((0,n.default)().mark((function e(){var a,i,c,o,s,r,l,d;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.request({url:"./drive?driveId=".concat(t.driveId)});case 2:if(a=e.sent,i=a.data.data,t.drive=i,c=i.process,o=Math.round(c.length/2),o){e.next=9;break}return e.abrupt("return");case 9:t.longitude=c[o].longitude,t.latitude=c[o].latitude,s={color:"#12c875",width:5,points:c.map((function(t){return{longitude:t.longitude,latitude:t.latitude}}))},t.polyline.push(s),r=c[0],l=c[c.length-1],d=t.getDistance(r.latitude,r.longitude,l.latitude,l.longitude),t.mapScale=d<3?17:d<10?13:d<20?12:d<40?11:8;case 17:case"end":return e.stop()}}),e)})))()},methods:{mapSize:function(t){"large"===t&&(this.mapScale=this.mapScale+1>30?30:this.mapScale+1),"small"===t&&(this.mapScale=this.mapScale-1<3?3:this.mapScale-1)},getDistance:function(t,e,a,i){var n=6371,c=this.deg2rad(a-t),o=this.deg2rad(i-e),s=Math.sin(c/2)*Math.sin(c/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(a))*Math.sin(o/2)*Math.sin(o/2),r=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),l=n*r;return l},deg2rad:function(t){return t*(Math.PI/180)}}};e.default=o}}]);